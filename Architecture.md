ここではDelFEMの内部の構造について説明します．


DelFEMは形状モジュール，メッシュモジュール，有限要素法モジュールの二つに分かれており，それぞれの名前空間はCad,Msh,Femに対応しています．

３つのそれぞれのモジュール間のデータのやり取りは抽象クラスを用いてなされます．具体的にはICad2Dという抽象クラスを継承していれば２次元のメッシュの生成ができます．また，IMeshというクラスを継承していれば，FEM解析にメッシュを取り込むことができます．

# 有限要素法部分の構造 #

有限要素法モジュールの内部のアーキテクチャはMVC(Model Visualization Controller)に基づき作られています．これはソフトウェア内部のクラスを，データを持ったクラス(Model)に可視化のためのクラス(Visualization)とデータを操作するクラス(Controller)に分けて考え，ModelにVisualizationとControllerが一方的に依存するというものです．FEMにおいてModelのクラスは有限要素法離散場を指し，Visualizationはその可視化，またControllerは偏微分方程式のことを指すと考えています．

## 有限要素法離散場の構造 ##

有限要素法離散場とは，物理量を持った場の有限要素法における表現方法です．有限要素法離散場はクラス(Fem::Field::CField)によって与えられます．有限要素法離散場クラス(Fem::Field::CField)は(Fem::Field::CFieldWorld)によって生成され内部で保持されています．

場のIDから場のクラス(Fem::Field::CField)を取得するためには次のように場管理クラス(Fem::Field::CFieldWorld)に値を設定します．

```
CField& field = world.GetField(id_field); // get field class from ID
```

## 連立方程式クラスの構造 ##

連立方程式クラスは場の値を偏微分方程式を解いて変更するためのクラスです．偏微分方程式には定常な物と非定常なものがあります．どちらも連立方程式クラスのメンバ関数CEqnSystem::Solve()を呼ぶことでこの偏微分方程式が解かれて場の値が変更されます．

偏微分方程式は内部に連立一次方程式クラスを持っているのですが，外部からは見えないようになっています．これは連立一次方程式は連立方程式によって最適な種類が異なるので，それらの管理を連立方程式クラスに任せることで，ユーザーが連立一次方程式のクラス選定などの煩雑な処理をしなくても良いことにつながっています．